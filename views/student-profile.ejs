<link rel="stylesheet" href="/css/student_profile.css">

<div class="container my-4">
  <div class="add-student d-flex flex-row-reverse">
    <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
      Add Student
    </button>
  </div>
</div>

<!-- Button trigger modal -->


<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
  aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <form action="/students/create-student" method="POST">
      <div class="modal-content bg-dark" style="opacity: 0.9;">
        <div class="modal-header">
          <h1 class="modal-title text-light fs-5" id="staticBackdropLabel">Enter Student Detials</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-light">
          <%- include('add-student'); %>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-success">Add Student</button>
        </div>
      </div>
    </form>
  </div>
</div>

<div class="container d-flex justify-content-between">
  <input type="text" id="search-student" placeholder="Enter the student name to search..." style="font-size: 1.3rem; font-weight: 700; border: none; outline: none; border-bottom: 2px solid black; background-color: transparent; color: white;">
  <button id="search-button" type="button" class="btn btn-primary">Search</button>
</div>

<div class="container mt-5">
  <div class="accordion" id="accordionPanelsStayOpenExample">
    <% for(s of student){ %>
      <div class="accordion-item bg-dark opacity-75 my-2" data-student-name="<%= s.name.toLowerCase() %>">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-<%= s._id %>" aria-expanded="false" aria-controls="panelsStayOpen-collapseOne">
            <%= s.name %>
          </button>
        </h2>
        <div id="panelsStayOpen-<%= s._id %>" class="accordion-collapse collapse">
          <div class="accordion-body text-light">
            <table class="details-table">
              <tr>
                <th>Course Name</th>
                <th>Mentor Name</th>
                <th>Email</th>
                <th>Date of Birth</th>
                <th>Grades</th>
                <th>Address</th>
                <th>City</th>
                <th>Pincode</th>
              </tr>
              <tr>
                <td><%= s.courseName %></td>
                <td><%= s.mentorName %></td>
                <td><%= s.email %></td>
                <td><%= s.dob.split('-').reverse().join('-') %></td>
                <td><%= s.grades %></td>
                <td><%= s.address %></td>
                <td><%= s.city %></td>
                <td><%= s.pincode %></td>
              </tr>
            </table>
            <br>
            <div class="d-flex flex-row-reverse mt-2">
              <a href="/students/delete-student/<%= s._id %>"><button type="button" class="btn btn-danger">Delete Record</button></a>
            </div>
          </div>
        </div>
      </div>
    <% } %>
  </div>
</div>

<script src="/js/student-profile.js"></script>